"use strict";const animeListFav=document.querySelector(".js-anime_list_fav"),animeList=document.querySelector(".js-anime_list"),searchInputTitle=document.querySelector(".js-search_input_title"),buttonSearch=document.querySelector(".js-button_search"),buttonReset=document.querySelector(".js-button_reset"),buttonResetFav=document.querySelector(".js-button_reset_fav"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let data=[],dataFav=[];function fetchItems(){fetch("https://api.jikan.moe/v3/search/anime?q="+searchInputTitle.value).then(e=>e.json()).then(e=>{data=e.results,renderAllItems()})}function handleAnimeTitle(e){e.preventDefault(),fetchItems()}function handleAnimeFav(e){void 0===dataFav.find(t=>t.title===e.currentTarget.dataset.title)?(dataFav.push(e.currentTarget.dataset),e.currentTarget.classList.add("js-fav"),setInLocalStorage(),renderAllItemsFav()):alert("La serie de anime ya est√° en la lista de favoritos")}function renderAllItems(){animeList.innerHTML="";for(const e of data)renderItem(e);const e=document.querySelectorAll(".js-article");for(const t of e)t.addEventListener("click",handleAnimeFav)}function renderItem(e){let t=e.image_url;null===e.image_url&&(t=defaultImage);const a=document.createElement("article");a.classList.add("js-anime"),a.classList.add("js-article"),a.dataset.title=e.title,a.dataset.imageUrl=t,a.innerHTML=`<img class="js-image" src="${t}" alt="" placeholder="">\n    <h3 class="js-card__title">${e.title}</h3>`;void 0!==dataFav.find(t=>t.title===e.title)&&a.classList.add("js-fav"),animeList.appendChild(a)}function renderAllItemsFav(){animeListFav.innerHTML="";for(const e of dataFav)renderItemFav(e)}function renderItemFav(e){const t=document.createElement("li");t.classList.add("js-favItem"),t.innerHTML=`<img class="js-image-fav" src="${e.imageUrl}" alt="" placeholder=""><h3 class="card__title">${e.title}</h3>`,animeListFav.appendChild(t)}function handleClickResetAllFav(){dataFav=[],localStorage.clear(),location.reload()}function handleClickReset(){location.reload()}function setInLocalStorage(){localStorage.setItem("dataLocalStorageFav",JSON.stringify(dataFav))}function getFromLocalStorage(){const e=localStorage.getItem("dataLocalStorageFav");null===e?dataFav=[]:(dataFav=JSON.parse(e),renderAllItemsFav())}buttonSearch.addEventListener("click",handleAnimeTitle),buttonResetFav.addEventListener("click",handleClickResetAllFav),buttonReset.addEventListener("click",handleClickReset),getFromLocalStorage(),console.log(">> Ready :)");